angular.module("layout-containers",[]).directive("viewport",["$window","$compile",function(t){return{restrict:"E",transclude:!0,template:"<div style='height:{{height}}px;width:{{width}}px'></div>",controller:["$scope","$element","$attrs","$transclude",function(e,i,n,o){var r,h;e.height=t.innerHeight,e.width=t.innerWidth,$(window).on("resize.doResize",function(){e.$apply(function(){e.height=t.innerHeight,e.width=t.innerWidth,h.height=e.height,h.width=e.width,r.attr("height",e.height),r.attr("width",e.width)})}),e.$on("$destroy",function(){$(window).off("resize.doResize")}),o(function(t,e){i.children().append(t),r=t,h=e})}],link:function(){}}}]),angular.module("layout-containers").directive("borderLayout",[function(){return{restrict:"E",scope:{height:"@",width:"@",border:"@"},transclude:!0,bindToController:!0,controllerAs:"borderCtrl",templateUrl:"./templates/borderLayout.html",controller:["$scope","$element","$attrs",function(t,e){"true"==this.border&&(this.borderNeeded=!0),this.height||(this.height=e.parent().height()),this.width||(this.width=e.parent().width())}],link:function(t,e,i,n){var o=n;t.$watch(function(){return e.parent().height()},function(t){o.height=t}),t.$watch(function(){return e.parent().width()},function(t){o.width=t})}}}]),angular.module("layout-containers").directive("north",[function(){return{restrict:"E",scope:{size:"@",split:"@",collapsible:"@"},transclude:!0,controller:["$scope","$element","$attrs",function(){}],controllerAs:"northCtrl",require:["^borderLayout","^north"],bindToController:!0,templateUrl:"./templates/northContainer.html",link:function(t,e,i,n){var o=n[0],r=n[1];t.$watch(function(){return o.width},function(){t.northWidth=o.northWidth=o.width,t.northHeight=o.northHeight=r.size;var e=0;e="true"==r.split?r.size-5:r.size,t.contentHeight=e,t.northTop=0,t.northLeft=0})}}}]),angular.module("layout-containers").directive("south",[function(){return{restrict:"E",scope:{size:"@",split:"@",collapsible:"@"},transclude:!0,controller:["$scope","$element","$attrs",function(){}],controllerAs:"southCtrl",require:["^borderLayout","^south"],bindToController:!0,templateUrl:"./templates/southContainer.html",link:function(t,e,i,n){var o=n[0],r=n[1];t.$watch(function(){return o.width},function(){t.southWidth=o.southWidth=o.width,t.southHeight=o.southHeight=r.size;var e=0;e="true"==r.split?r.size-5:r.size,t.contentHeight=e,t.southBottom=0,t.southLeft=0})}}}]),angular.module("layout-containers").directive("west",["$document","$timeout",function(t,e){return{restrict:"E",scope:{size:"@",split:"@",collapsible:"@",collapsed:"@"},transclude:!0,controller:["$scope","$element","$attrs",function(){this.height=0,this.width=0,this.contentWidth=0,this.top=0,this.left=0,this.splitNeeded=!1}],controllerAs:"westCtrl",require:["^borderLayout","^west"],bindToController:!0,templateUrl:"./templates/westContainer.html",link:function(i,n,o,r,h){function s(){l.top=0,l.left=0,l.height=a,c.westSize=l.width=l.size,l.contentWidth=l.size,l.splitNeeded&&(l.contentWidth=l.size-5),d.height=l.height,d.width=l.contentWidth,u.attr("height",l.height),u.attr("width",l.contentWidth),u.css({height:l.height,width:l.contentWidth})}var c=r[0],l=r[1];"true"==l.split&&(l.splitNeeded=!0);var a=0;i.$watch(function(){return c.height},function(t){t&&t>0&&(a=t,s())}),i.$watch("westCtrl.collapsed",function(t){"true"==t?(n.css("display","none"),c.westSize=0):"false"==t&&(n.css("display","block"),c.westSize=l.size)});var u,d;h(function(t,e){n.find("#contentPart").append(t),d=e,u=t});var f;i.activateSplitter=function(i){function o(t){$(h).css({left:t.pageX-n.offset().left+"px"}),f=!0}function r(i){t.off("mousemove",o),t.off("mouseup",r),f&&(e(function(){var t=i.pageX-n.offset().left;l.size=t+5,s(),c.westSize=t+5},0),f=!1)}var h=i.target;i.preventDefault(),t.on("mousemove",o),t.on("mouseup",r)}}}}]),angular.module("layout-containers").directive("east",["$document","$timeout",function(t,e){return{restrict:"E",scope:{size:"@",split:"@",collapsible:"@",collapsed:"@"},transclude:!0,controller:["$scope","$element","$attrs",function(){this.height=0,this.width=0,this.contentWidth=0,this.top=0,this.left=0,this.splitNeeded=!1,this.contentLeft=0}],controllerAs:"eastCtrl",require:["^borderLayout","^east"],bindToController:!0,templateUrl:"./templates/eastContainer.html",link:function(i,n,o,r,h){function s(){l.top=0,l.right=0,l.height=a,c.eastSize=l.width=l.size,l.contentWidth=l.size,l.splitNeeded&&(l.contentWidth=l.size-5,l.contentLeft=5),d.height=l.height,d.width=l.contentWidth,u.attr("height",l.height),u.attr("width",l.contentWidth),u.css({height:l.height,width:l.contentWidth})}var c=r[0],l=r[1];"true"==l.split&&(l.splitNeeded=!0);var a=0;i.$watch(function(){return c.height},function(t){t&&t>0&&(a=t,s())}),i.$watch("eastCtrl.collapsed",function(t){"true"==t?(n.css("display","none"),c.eastSize=0):"false"==t&&(n.css("display","block"),c.eastSize=l.size)});var u,d;h(function(t,e){n.find("#contentPart").append(t),d=e,u=t});var f;i.activateSplitter=function(i){function n(t){$(r).css({left:-(c.width-t.pageX-l.contentWidth)+"px"}),f=!0}function o(i){t.off("mousemove",n),t.off("mouseup",o),f&&(e(function(){var t=c.width-i.pageX;l.size=t+5,s(),c.eastSize=t+10,$(r).css({left:"0px"})},0),f=!1)}var r=i.target;i.preventDefault(),t.on("mousemove",n),t.on("mouseup",o)}}}}]),angular.module("layout-containers").directive("centerPortion",["$document","$timeout",function(){return{restrict:"E",scope:{},transclude:!0,controller:["$scope","$element","$attrs",function(){this.height=0,this.width=0,this.top=0,this.left=0}],controllerAs:"ctrl",require:["^borderLayout","^centerPortion"],bindToController:!0,templateUrl:"./templates/centerContainer.html",link:function(t,e,i,n,o){function r(){var e=0;void 0!==h.eastSize&&(e=h.eastSize);var i=0;void 0!==h.westSize&&(i=h.westSize),s.top=0,s.left=i,s.height=h.height,s.width=h.width-i-e,l.height=s.height,l.width=s.width,c.attr("height",s.height),c.attr("width",s.width),c.css({height:s.height,width:s.width}),t.$broadcast("centerChangeEvent")}var h=n[0],s=n[1];t.$watch(function(){return h.height},function(t){void 0!==t&&r()}),t.$watch(function(){return h.width},function(t){void 0!==t&&r()}),t.$watch(function(){return h.westSize},function(t){void 0!==t&&r()}),t.$watch(function(){return h.eastSize},function(t){void 0!==t&&r()});var c,l;o(function(t,i){e.children().append(t),l=i,c=t})}}}]),angular.module("layout-containers").directive("contentPanel",[function(){return{restrict:"E",scope:{height:"@",width:"@",border:"@",bodyBorder:"@",headerLabel:"@",hideButtonBar:"@",close:"&onClose"},bindToController:!0,controllerAs:"ctrl",templateUrl:"./templates/contentPanel.html",transclude:!0,controller:["$scope","$element","$attrs",function(t,e){this.top=0,this.left=0,this.height=e.parent().height(),this.width=e.parent().width(),this.bodyHeight=0,this.buttonBarNeeded=!0}],link:function(t,e,i,n){function o(){r.bodyHeight=r.buttonBarNeeded?r.height-50-78:r.height-50}var r=n;"true"==r.hideButtonBar&&(r.buttonBarNeeded=!1),t.$watch(function(){return e.parent().height()},function(t){r.height=t,o()}),t.$watch(function(){return e.parent().width()},function(t){r.width=t,o()})}}}]);